<!DOCTYPE HTML>
<!--
    Prologue by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
        <title>Serve</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
        <script src="{{url_for('static', filename='js/jquery.min.js')}}"></script>
        <script src="{{url_for('static', filename='js/jquery.scrolly.min.js')}}"></script>
        <script src="{{url_for('static', filename='js/jquery.scrollzer.min.js')}}"></script>
        <script src="{{url_for('static', filename='js/skel.min.js')}}"></script>
        <script src="{{url_for('static', filename='js/skel-layers.min.js')}}"></script>
        <script src="{{url_for('static', filename='js/init.js')}}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
            <link rel="stylesheet" href="{{url_for('static', filename='css/skel.css')}}" />
            <link rel="stylesheet" href="{{url_for('static', filename='css/style2.css')}}" />
            <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" />
            <link rel="stylesheet" href="{{url_for('static', filename='css/style-wide.css')}}" />

        <script type="text/javascript">
            function newFunc(){
                $.ajax({
                    method: "POST",
                    url: "{{url_for('newFunc')}}",
                    data: {userid: "{{app.userId}}", appid: "{{app.id}}", code: "", name: "new_function"},
                    success: location.reload()
                })
            };

            function nameChange(e){
                $(e.target).replaceWith("<input ondblclick='name()' style='background-color:rgba(0,0,0,0.0)' type='text' value="+e.target.innerHTML+">");
            };

            function name(){
                $.ajax({
                    method: "POST",
                    url: "{{url_for('newFunc')}}",
                    data: {},
                    success: location.reload()
                })
            };
        </script>
    </head>
    <body>

        <!-- Header -->
            <div id="header" class="skel-layers-fixed">

                <div class="top">
                <div id="logo">
                    <h2>Serve</h2>
                </div>


                    <!-- Nav -->
                        <nav id="nav">
                            <!--
                            
                                Prologue's nav expects links in one of two formats:
                                
                                1. Hash link (scrolls to a different section within the page)
                                
                                   <li><a href="#foobar" id="foobar-link" class="icon fa-whatever-icon-you-want skel-layers-ignoreHref"><span class="label">Foobar</span></a></li>

                                2. Standard link (sends the user to another page/site)

                                   <li><a href="http://foobar.tld" id="foobar-link" class="icon fa-whatever-icon-you-want"><span class="label">Foobar</span></a></li>
                            
                            -->
                            <ul>
                                <li><a id="top-link" href="#" onclick="nameChange(event)" class="skel-layers-ignoreHref">{{app.name}}</a></li>
                                <li><a id="portfolio-link" href="#"  class="skel-layers-ignoreHref">{{app.language}}</a></li>
                                <li><a id="about-link" href="#" onclick="newFunc()" class="skel-layers-ignoreHref">{{app.numberFunc}}  +</a></li>
                            </ul>
                        </nav>
                        
                </div>
            </div>

        <!-- Main -->
            <div id="main">

                <!-- Intro -->
                    <section id="top" class="one dark cover">
                        <form  id="newfunc" method="post" action="{{url_for('newFunc')}}">
                            <textarea name="code" form="newfunc">
                            </textarea>
                            <input type="text" placeholder="name" name="name">
                            <input type="hidden" value="{{app.id}}" name="appid">
                            <input type="hidden" value="{{app.userId}}" name="userid">
                            <input type="submit">
                        </form>
                        
                    </section>
                    {% for function in functions %}
                        <section class="{{ loop.cycle('one dark', 'two') }}">
                            <h2>{{function.name}}</h2>
                            <div id="editor{{loop.index}}" class="editor u6">{{function.code}}</div>
                            <script type="text/javascript">
                                editor{{loop.index}} = ace.edit("editor{{loop.index}}");
                                editor{{loop.index}}.getSession().setMode("ace/mode/{{app.language|lower}}");
                            </script>
                        </section>
                    {% endfor %}
                </div>    

    </body>
</html>
